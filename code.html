<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasig City Museum</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, push, get, remove } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDqHz4WTXB_MP052F4GDg0bI0yzAgsY-D0",
            authDomain: "it107-8dc50.firebaseapp.com",
            databaseURL: "https://it107-8dc50-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "it107-8dc50",
            storageBucket: "it107-8dc50.firebasestorage.app",
            messagingSenderId: "733860878211",
            appId: "1:733860878211:web:9c6ab2a90f667b434308b6",
            measurementId: "G-SYFMVTT73H"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        window.firebaseDB = database;
        window.firebaseRef = ref;
        window.firebasePush = push;
    </script>
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjm8DPANbipxJgAJyb1VzxfrrtYPzoKYVTaWdGrA4YR9t0AInORcWnrdfJYk-0IHjA-rgf-TzmnhxAWvQrfDtrjB2aV6CCYBURCE3IeMPA3y8kct61_pf0V5ps9U3oPWPqA7BERlE9on8Y/s1600/thepinoywarrior+pasig+museum+1.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(1px);
            z-index: -1;
        }
        .frame {
            width: 600px;
            height: auto;
            border: 1px solid #ddd;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            padding: 30px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .header { 
            text-align: center; 
            font-size: 32px; 
            font-weight: bold; 
            color: #8b4513; 
            margin: 20px 0; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1); 
        }
        .logo { 
            display: block; 
            margin: 0 auto; 
            max-width: 150px; 
            height: auto; 
            border-radius: 10px; 
        }
        .card {
            border: 1px solid #e0e0e0;
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background: #f9f9f9;
        }
        .card i {
            font-size: 28px;
            margin-right: 20px;
            color: #8b4513;
        }
        .button {
            background: linear-gradient(45deg, #8b4513, #a0522d);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin: 15px 0;
            font-size: 18px;
            transition: background 0.3s;
            text-align: center;
        }
        .button:hover {
            background: linear-gradient(45deg, #a0522d, #8b4513);
        }
        .back-button {
            background: transparent;
            color: #8b4513;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 10px;
            padding: 5px 10px;
            text-align: left;
        }
        .back-button:hover {
            background: rgba(139, 69, 19, 0.1);
        }
        .accent {
            color: #228b22;
        }
        .input {
            width: 95%;
            padding: 12px;
            margin: 15px auto;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
            text-align: left;
        }
        .hidden { 
            display: none; 
        }
        .progress-bar { 
            width: 100%; 
            height: 10px; 
            background: #e0e0e0; 
            border-radius: 4px; 
            margin: 15px 0; 
        }
        .progress-fill { 
            height: 100%; 
            background: #228b22; 
            border-radius: 4px; 
            width: 0%; 
            transition: width 0.3s; 
        }
        .stars { 
            display: flex; 
            cursor: pointer; 
        }
        .star { 
            font-size: 28px; 
            color: #ddd; 
            margin: 0 3px; 
        }
        .star.selected { 
            color: #ffd700; 
        }

        @media (max-width: 768px) { 
            .frame { 
                width: 100%; 
                max-width: 375px; 
                padding: 20px; 
                margin: 10px; 
            } 
            .header { 
                font-size: 24px; 
            } 
            .logo { 
                max-width: 120px; 
            } 
            .button { 
                font-size: 16px; 
                padding: 12px; 
            } 
            .star { 
                font-size: 24px; 
            } 
        }
    </style>
</head>
<body>

    <div class="frame" id="home">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Pasig_Wordmark.svg/2560px-Pasig_Wordmark.svg.png" alt="Pasig Logo" class="logo">
        <div class="header">Pasig City Museum</div>
        <div class="card" onclick="showFrame('feedback')">
            <i class="fas fa-comments"></i>
            <div>
                <h3>Feedback (Puna)</h3>
                <p>Share your thoughts on the museum.</p>
            </div>
        </div>
        <div class="card" onclick="showFrame('survey')">
            <i class="fas fa-clipboard-list"></i>
            <div>
                <h3>Survey</h3>
                <p>Participate in our visitor survey.</p>
            </div>
        </div>


        <p style="text-align: center; font-size: 14px; color: #666;">Powered by Pasig City Government</p>
    </div>

    <div class="frame" id="feedback" style="display: none;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Pasig_Wordmark.svg/2560px-Pasig_Wordmark.svg.png" alt="Pasig Logo" class="logo">
        <button class="back-button" onclick="showFrame('home')">← Back</button>
        <div class="header">Submit Feedback (Puna)</div>
        <p>Progress: <span class="accent" id="fb-progress">0/11</span></p>
        <div class="progress-bar"><div class="progress-fill" id="fb-progress-fill"></div></div>
        
        <p><strong>1. Overall Experience</strong><br>How would you rate your overall experience at the museum?</p>
        <input type="radio" name="fb-overall" value="Excellent" onclick="updateFbProgress()"> Excellent
        <input type="radio" name="fb-overall" value="Good" onclick="updateFbProgress()"> Good
        <input type="radio" name="fb-overall" value="Fair" onclick="updateFbProgress()"> Fair
        <input type="radio" name="fb-overall" value="Poor" onclick="updateFbProgress()"> Poor
        
        <p><strong>2. Favorite Part</strong><br>What was your favorite exhibit or part of the museum?</p>
        <textarea class="input" id="fb-favorite" rows="2" placeholder="Your answer" oninput="updateFbProgress()"></textarea>
        
        <p><strong>3. Learning Impact</strong><br>Did you learn something new during your visit?</p>
        <input type="radio" name="fb-learn" value="Yes" onclick="updateFbProgress()"> Yes
        <input type="radio" name="fb-learn" value="Somewhat" onclick="updateFbProgress()"> Somewhat
        <input type="radio" name="fb-learn" value="No" onclick="updateFbProgress()"> No
        
        <p><strong>4. Staff and Service</strong><br>How would you rate the friendliness and helpfulness of the museum staff?</p>
        <input type="radio" name="fb-staff" value="Excellent" onclick="updateFbProgress()"> Excellent
        <input type="radio" name="fb-staff" value="Good" onclick="updateFbProgress()"> Good
        <input type="radio" name="fb-staff" value="Fair" onclick="updateFbProgress()"> Fair
        <input type="radio" name="fb-staff" value="Poor" onclick="updateFbProgress()"> Poor
        
        <p><strong>5. Facilities</strong><br>Were the museum facilities (restrooms, seating areas, signage, etc.) satisfactory?</p>
        <input type="radio" name="fb-facilities" value="Yes" onclick="updateFbProgress()"> Yes
        <input type="radio" name="fb-facilities" value="No" onclick="updateFbProgress()"> No
        <input type="radio" name="fb-facilities" value="Somewhat" onclick="updateFbProgress()"> Somewhat
        
        <p><strong>6. Exhibit Quality</strong><br>How engaging or interesting did you find the exhibits?</p>
        <input type="radio" name="fb-exhibits" value="Very engaging" onclick="updateFbProgress()"> Very engaging
        <input type="radio" name="fb-exhibits" value="Somewhat engaging" onclick="updateFbProgress()"> Somewhat engaging
        <input type="radio" name="fb-exhibits" value="Not engaging" onclick="updateFbProgress()"> Not engaging
        
        <p><strong>7. Accessibility</strong><br>Was it easy to navigate and move around the museum?</p>
        <input type="radio" name="fb-access" value="Yes" onclick="updateFbProgress()"> Yes
        <input type="radio" name="fb-access" value="Somewhat" onclick="updateFbProgress()"> Somewhat
        <input type="radio" name="fb-access" value="No" onclick="updateFbProgress()"> No
        
        <p><strong>8. Value for Money</strong><br>If you paid an entrance fee, do you feel it was worth the price?</p>
        <input type="radio" name="fb-value" value="Yes" onclick="updateFbProgress()"> Yes
        <input type="radio" name="fb-value" value="No" onclick="updateFbProgress()"> No
        <input type="radio" name="fb-value" value="Not applicable" onclick="updateFbProgress()"> Not applicable
        
        <p><strong>9. Recommendation</strong><br>Would you recommend this museum to others?</p>
        <input type="radio" name="fb-recommend" value="Definitely" onclick="updateFbProgress()"> Definitely
        <input type="radio" name="fb-recommend" value="Maybe" onclick="updateFbProgress()"> Maybe
        <input type="radio" name="fb-recommend" value="No" onclick="updateFbProgress()"> No
        
        <p><strong>10. Suggestions</strong><br>What can we do to improve your experience next time?</p>
        <textarea class="input" id="fb-suggestions" rows="3" placeholder="Your answer" oninput="updateFbProgress()"></textarea>
        
        <p><strong>11. Future Interests</strong><br>What types of exhibits or programs would you like to see in the future?</p>
        <textarea class="input" id="fb-future" rows="3" placeholder="Your answer" oninput="updateFbProgress()"></textarea>
        
        <button class="button" onclick="submitFeedback()">Submit</button>
        <button onclick="showFrame('home')">Cancel</button>
    </div>

    <div class="frame" id="survey" style="display: none;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Pasig_Wordmark.svg/2560px-Pasig_Wordmark.svg.png" alt="Pasig Logo" class="logo">
        <button class="back-button" onclick="showFrame('home')">← Back</button>
        <div class="header">Visitor Survey</div>
        <p>Progress: <span class="accent" id="survey-progress">0/18</span></p>
        <div class="progress-bar"><div class="progress-fill" id="survey-progress-fill"></div></div>
        
        <p><strong>A. Basic Information</strong></p>
        <p>1. Is this your first time visiting the museum?</p>
        <input type="radio" name="survey-first" value="Yes" onclick="updateSurveyProgress()"> Yes
        <input type="radio" name="survey-first" value="No" onclick="updateSurveyProgress()"> No
        
        <p>2. How did you hear about the museum?</p>
        <input type="radio" name="survey-hear" value="Social media" onclick="updateSurveyProgress()"> Social media
        <input type="radio" name="survey-hear" value="Friends or family" onclick="updateSurveyProgress()"> Friends or family
        <input type="radio" name="survey-hear" value="School or organization" onclick="updateSurveyProgress()"> School or organization
        <input type="radio" name="survey-hear" value="Online search" onclick="updateSurveyProgress()"> Online search
        <input type="radio" name="survey-hear" value="Other" onclick="updateSurveyProgress()"> Other
        <input class="input" id="survey-hear-other" type="text" placeholder="Specify" style="display: none;" oninput="updateSurveyProgress()">
        
        <p><strong>B. Visitor Experience</strong></p>
        <p>3. How would you rate your overall experience at the museum?</p>
        <input type="radio" name="survey-overall" value="Excellent" onclick="updateSurveyProgress()"> Excellent
        <input type="radio" name="survey-overall" value="Good" onclick="updateSurveyProgress()"> Good
        <input type="radio" name="survey-overall" value="Fair" onclick="updateSurveyProgress()"> Fair
        <input type="radio" name="survey-overall" value="Poor" onclick="updateSurveyProgress()"> Poor
        
        <p>4. Which exhibit or section did you enjoy the most?</p>
        <textarea class="input" id="survey-enjoy" rows="2" placeholder="Your answer" oninput="updateSurveyProgress()"></textarea>
        
        <p>5. How informative did you find the exhibits?</p>
        <input type="radio" name="survey-informative" value="Very informative" onclick="updateSurveyProgress()"> Very informative
        <input type="radio" name="survey-informative" value="Somewhat informative" onclick="updateSurveyProgress()"> Somewhat informative
        <input type="radio" name="survey-informative" value="Not very informative" onclick="updateSurveyProgress()"> Not very informative
        
        <p>6. Were the museum staff friendly and helpful?</p>
        <input type="radio" name="survey-staff" value="Yes" onclick="updateSurveyProgress()"> Yes
        <input type="radio" name="survey-staff" value="Somewhat" onclick="updateSurveyProgress()"> Somewhat
        <input type="radio" name="survey-staff" value="No" onclick="updateSurveyProgress()"> No
        
        <p>7. How would you rate the cleanliness and organization of the museum?</p>
        <input type="radio" name="survey-clean" value="Excellent" onclick="updateSurveyProgress()"> Excellent
        <input type="radio" name="survey-clean" value="Good" onclick="updateSurveyProgress()"> Good
        <input type="radio" name="survey-clean" value="Fair" onclick="updateSurveyProgress()"> Fair
        <input type="radio" name="survey-clean" value="Poor" onclick="updateSurveyProgress()"> Poor
        
        <p><strong>C. Facilities and Accessibility</strong></p>
        <p>8. How satisfied are you with the following?</p>
        <p>Museum layout and navigation</p>
        <input type="radio" name="survey-layout" value="Very satisfied" onclick="updateSurveyProgress()"> Very satisfied
        <input type="radio" name="survey-layout" value="Neutral" onclick="updateSurveyProgress()"> Neutral
        <input type="radio" name="survey-layout" value="Dissatisfied" onclick="updateSurveyProgress()"> Dissatisfied
        <p>Rest areas and seating</p> 
        <input type="radio" name="survey-seating" value="Very satisfied" onclick="updateSurveyProgress()"> Very satisfied 
        <input type="radio" name="survey-seating" value="Neutral" onclick="updateSurveyProgress()"> Neutral 
        <input type="radio" name="survey-seating" value="Dissatisfied" onclick="updateSurveyProgress()"> Dissatisfied 
        <p>Restroom facilities</p> 
        <input type="radio" name="survey-restroom" value="Very satisfied" onclick="updateSurveyProgress()"> Very satisfied 
        <input type="radio" name="survey-restroom" value="Neutral" onclick="updateSurveyProgress()"> Neutral 
        <input type="radio" name="survey-restroom" value="Dissatisfied" onclick="updateSurveyProgress()"> Dissatisfied
              
        <p>9. Did you find the ticket price reasonable?</p>
        <input type="radio" name="survey-price" value="Yes" onclick="updateSurveyProgress()"> Yes
        <input type="radio" name="survey-price" value="No" onclick="updateSurveyProgress()"> No
        <input type="radio" name="survey-price" value="Not applicable" onclick="updateSurveyProgress()"> Not applicable (free entry)
        
        <p><strong>D. Learning and Impact</strong></p>
        <p>10. What did you learn from your visit today?</p>
        <textarea class="input" id="survey-learn" rows="3" placeholder="Your answer" oninput="updateSurveyProgress()"></textarea>
        
        <p>11. Did your visit increase your interest in history, art, or culture?</p>
        <input type="radio" name="survey-interest" value="Yes" onclick="updateSurveyProgress()"> Yes
        <input type="radio" name="survey-interest" value="Somewhat" onclick="updateSurveyProgress()"> Somewhat
        <input type="radio" name="survey-interest" value="No" onclick="updateSurveyProgress()"> No
        
        <p>12. Would you recommend this museum to others?</p>
        <input type="radio" name="survey-recommend" value="Definitely" onclick="updateSurveyProgress()"> Definitely
        <input type="radio" name="survey-recommend" value="Maybe" onclick="updateSurveyProgress()"> Maybe
        <input type="radio" name="survey-recommend" value="No" onclick="updateSurveyProgress()"> No
        
        <p><strong>E. Suggestions and Feedback</strong></p>
        <p>13. What could we improve in the museum?</p>
        <textarea class="input" id="survey-improve" rows="3" placeholder="Your answer" oninput="updateSurveyProgress()"></textarea>
        
        <p>14. What kind of exhibits or activities would you like to see in the future?</p>
        <textarea class="input" id="survey-future" rows="3" placeholder="Your answer" oninput="updateSurveyProgress()"></textarea>
        
        <p><strong>(Optional Add-On for Student Visits)</strong></p>
        <p>15. Was your visit aligned with your school subject or lessons?</p>
        <input type="radio" name="survey-aligned" value="Yes" onclick="updateSurveyProgress()"> Yes
        <input type="radio" name="survey-aligned" value="Somewhat" onclick="updateSurveyProgress()"> Somewhat
        <input type="radio" name="survey-aligned" value="No" onclick="updateSurveyProgress()"> No
        
        <p>16. How engaging were the interactive or educational activities?</p>
        <input type="radio" name="survey-engaging" value="Very engaging" onclick="updateSurveyProgress()"> Very engaging
        <input type="radio" name="survey-engaging" value="Moderately engaging" onclick="updateSurveyProgress()"> Moderately engaging
        <input type="radio" name="survey-engaging" value="Not engaging" onclick="updateSurveyProgress()"> Not engaging
        
        <button class="button" onclick="submitSurvey()">Submit</button>
        <button onclick="showFrame('home')">Cancel</button>
    </div>

    <div class="frame" id="summary" style="display: none;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Pasig_Wordmark.svg/2560px-Pasig_Wordmark.svg.png" alt="Pasig Logo" class="logo">
        <div class="header">Submission Summary</div>
        <div id="summary-content"></div>
        <button class="button" onclick="showFrame('thankyou')">Confirm</button>
        <button onclick="resetForms()">Reset</button>
    </div>

    <div class="frame" id="thankyou" style="display: none;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Pasig_Wordmark.svg/2560px-Pasig_Wordmark.svg.png" alt="Pasig Logo" class="logo">
        <i class="fas fa-check-circle" style="font-size: 50px; color: #228b22; text-align: center; display: block;"></i>
        <div class="header">Thank You!</div>
        <p>Your feedback/survey has been submitted. Enjoy Pasig City Museum!</p>
        <button class="button" onclick="showFrame('home')">Return Home</button>
    </div>



    <script>
        function showFrame(id) {
            document.querySelectorAll('.frame').forEach(f => f.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }



        function updateFbProgress() {
            const total = 11;
            let completed = 0;
            const radios = document.querySelectorAll('#feedback input[type="radio"]:checked');
            const texts = document.querySelectorAll('#feedback textarea');
            completed += radios.length;
            texts.forEach(t => { if (t.value.trim()) completed++; });
            document.getElementById('fb-progress').textContent = `${completed}/${total}`;
            document.getElementById('fb-progress-fill').style.width = `${(completed / total) * 100}%`;
        }

        function updateSurveyProgress() {
            const total = 18;
            let completed = 0;
            const radios = document.querySelectorAll('#survey input[type="radio"]:checked');
            const texts = document.querySelectorAll('#survey textarea');
            const otherInput = document.getElementById('survey-hear-other');
            completed += radios.length;
            texts.forEach(t => { if (t.value.trim()) completed++; });
            if (otherInput && otherInput.value.trim() && otherInput.style.display !== 'none') completed++;
            document.getElementById('survey-progress').textContent = `${completed}/${total}`;
            document.getElementById('survey-progress-fill').style.width = `${(completed / total) * 100}%`;
        }

        function submitFeedback() {
            const data = { type: 'Feedback', timestamp: new Date().toISOString() };
            const radios = document.querySelectorAll('#feedback input[type="radio"]:checked');
            radios.forEach(r => data[r.name] = r.value);
            const texts = document.querySelectorAll('#feedback textarea');
            texts.forEach(t => { if (t.value.trim()) data[t.id] = t.value; });
            // Basic validation: ensure at least some fields are filled
            if (Object.keys(data).length <= 2) { // only type and timestamp
                alert('Please fill out the feedback form.');
                return;
            }
            saveToStorage(data);
            showSummary(data);
        }

        function submitSurvey() {
            const data = { type: 'Survey', timestamp: new Date().toISOString() };
            const radios = document.querySelectorAll('#survey input[type="radio"]:checked');
            radios.forEach(r => data[r.name] = r.value);
            const texts = document.querySelectorAll('#survey textarea');
            texts.forEach(t => { if (t.value.trim()) data[t.id] = t.value; });
            const otherInput = document.getElementById('survey-hear-other');
            if (otherInput && otherInput.value.trim()) data['survey-hear-other'] = otherInput.value;
            if (Object.keys(data).length <= 2) { 
                alert('Please fill out the survey form.');
                return;
            }
            saveToStorage(data);
            showSummary(data);
        }

        async function saveToStorage(data) {
            try {
                const submissionsRef = window.firebaseRef(window.firebaseDB, 'submissions');
                await window.firebasePush(submissionsRef, data);
                console.log('Data saved to Firebase');
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                alert('Failed to save submission. Please try again.');
            }
        }

        function showSummary(data) {
            const content = document.getElementById('summary-content');
            let html = '<h3>Submission Details</h3>';
            html += '<p><strong>Type:</strong> ' + data.type + '</p>';
            html += '<p><strong>Timestamp:</strong> ' + new Date(data.timestamp).toLocaleString() + '</p>';
            html += '<ul>';
            for (const key in data) {
                if (key !== 'type' && key !== 'timestamp') {
                    const value = data[key].toString().replace(/</g, '<').replace(/>/g, '>');
                    html += '<li><strong>' + key.replace(/fb-|survey-/, '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) + ':</strong> ' + value + '</li>';
                }
            }
            html += '</ul>';
            content.innerHTML = html;
            showFrame('summary');
        }

        function resetForms() {
            document.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            updateFbProgress();
            updateSurveyProgress();
            showFrame('home');
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('input[name="survey-hear"]').forEach(r => {
                r.addEventListener('change', function() {
                    document.getElementById('survey-hear-other').style.display = this.value === 'Other' ? 'block' : 'none';
                });
            });
        });
    </script>
</body>
</html>